<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Friday, May 02, 2014, 3:46 PM -->
<!-- MuClient version 4.92 -->

<!-- Plugin "LocalEdit" generated by Plugin Wizard -->

<muclient>
<plugin
   name="LocalEdit"
   author="Vega7"
   id="3f5c54dcb6e1c19b980a2089"
   language="Lua"
   purpose="Gives support for local MOO editing utilizing the MCP protocol"
   save_state="y"
   date_written="2014-05-02 15:44:39"
   requires="4.43"
   version="0.8"
   >
<description trim="y">
<![CDATA[
This plugin allows one to edit code locally and send it back to a MOO.
@edit-options +local to activate support for this within a standard LambdaCore distrobution.
Once enabled, @edit-ing verbs will open a notepad. To send your edits back to the server, hit ctrl+shift+s or click on edit -> send to <world>. You can also save verbs locally by clicking save under file or choosing yes when exiting the notepad area.
]]>
</description>

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   match="#$# edit name: * upload: *"
   name="BeginEdit"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable("CurrentVerbName", string.gsub("%1", ":", " - "))
if GetNotepadList() then
for k, v in pairs (GetNotepadList()) do 
 if v == GetVariable("CurrentVerbName") then
  ActivateNotepad(GetVariable("CurrentVerbName"))
  return
  end  
end
end
AppendToNotepad(GetVariable("CurrentVerbName"), "%2\\r\\n")
SetTriggerOption("CodeLine", "enabled", 1)</send>
  </trigger>
  <trigger
   match="*"
   name="CodeLine"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>if ("%1"==".") then
AppendToNotepad(GetVariable("CurrentVerbName"), ".\\r\\n")
ActivateNotepad(GetVariable("CurrentVerbName"))
SetTriggerOption("CodeLine", "Enabled", 0)
else
AppendToNotepad(GetVariable("CurrentVerbName"), "%1", "\\r\\n")
end</send>
  </trigger>
  <trigger
   enabled="y"
   match="* successfully compiled."
   omit_from_output="y"
   send_to="2"
   sequence="100"
  >
  <send>Successfully compiled.</send>
  </trigger>
</triggers>

<!--  Variables  -->

<variables>
  <variable name="CurrentVerbName">Obj - verb</variable>
</variables>

</muclient>
